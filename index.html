<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gestion Mobile Money Pro</title>

<style>
body {font-family: Arial; background:#0f172a; margin:0; color:white}
h1 {text-align:center; padding:15px}
.container {background:white; color:black; margin:15px; padding:15px; border-radius:15px}
input, select, button {padding:8px; margin:5px; border-radius:8px; border:1px solid #ccc}
button {cursor:pointer; background:#0f172a; color:white}
.card {background:#f1f5f9; padding:8px; margin:5px; border-radius:8px}
.hidden {display:none}
hr {margin:25px 0}
</style>

</head>
<body>

<h1>Gestion Mobile Money Pro</h1>

<div class="container">

<div id="loginSection">
<h2>Connexion</h2>
<input type="password" id="password" placeholder="Entrer PIN">
<button onclick="login()">Se connecter</button>
</div>

<div id="appSection" class="hidden">

<button onclick="logout()">Déconnexion</button>

<h2>Solde Caisse</h2>
<p>USD: <span id="caisseUSD">0</span></p>
<p>CDF: <span id="caisseCDF">0</span></p>

<h2>Solde Opérateurs</h2>
<div id="operatorBalances"></div>

<hr>

<h2>Nouvelle Transaction</h2>

<select id="operatorSelect"></select>
<select id="typeSelect"></select>

<select id="currency">
<option value="USD">USD</option>
<option value="CDF">CDF</option>
</select>

<input type="number" id="amount" placeholder="Montant">
<input type="text" id="motif" placeholder="Motif">

<button onclick="addTransaction()">Valider</button>

<hr>

<h2>ADMIN - Soldes Initiaux & Création</h2>

<div id="adminSection">

<h3>Caisse</h3>
<input type="number" id="initUSD" placeholder="USD">
<input type="number" id="initCDF" placeholder="CDF">
<button onclick="setInitialCaisse()">Définir</button>

<hr>

<h3>Ajouter Opérateur</h3>
<input type="text" id="newOperator" placeholder="Nom opérateur">
<input type="number" id="opInitUSD" placeholder="USD">
<input type="number" id="opInitCDF" placeholder="CDF">
<input type="number" id="opInitStock" placeholder="Stock">
<button onclick="addOperator()">Ajouter</button>

<div id="operatorList"></div>

</div>

<hr>

<h2>Historique</h2>
<div id="history"></div>

</div>
</div>

<script>

let caisse = JSON.parse(localStorage.getItem("caisse")) || {USD:0,CDF:0};
let operators = JSON.parse(localStorage.getItem("operators")) || [];
let types = JSON.parse(localStorage.getItem("types")) || [];
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

const ADMIN_PIN = "admin123";
const EMP_PIN = "emp123";

let currentRole = localStorage.getItem("role") || "";

function saveAll(){
localStorage.setItem("caisse",JSON.stringify(caisse));
localStorage.setItem("operators",JSON.stringify(operators));
localStorage.setItem("types",JSON.stringify(types));
localStorage.setItem("transactions",JSON.stringify(transactions));
localStorage.setItem("role",currentRole);
}

function login(){
let pass=document.getElementById("password").value;

if(pass===ADMIN_PIN){
currentRole="admin";
showApp();
}
else if(pass===EMP_PIN){
currentRole="employee";
showApp();
}
else{
alert("PIN incorrect");
}
saveAll();
}

function logout(){
localStorage.removeItem("role");
location.reload();
}

function showApp(){
if(currentRole){
document.getElementById("loginSection").classList.add("hidden");
document.getElementById("appSection").classList.remove("hidden");

if(currentRole==="employee"){
document.getElementById("adminSection").style.display="none";
}

display();
}
}

function setInitialCaisse(){
if(currentRole!=="admin") return;
caisse.USD=parseFloat(document.getElementById("initUSD").value)||0;
caisse.CDF=parseFloat(document.getElementById("initCDF").value)||0;
saveAll();
display();
}

function addOperator(){
if(currentRole!=="admin") return;

let name=document.getElementById("newOperator").value;
let usd=parseFloat(document.getElementById("opInitUSD").value)||0;
let cdf=parseFloat(document.getElementById("opInitCDF").value)||0;
let stock=parseFloat(document.getElementById("opInitStock").value)||0;

if(!name)return;

operators.push({name,USD:usd,CDF:cdf,stock:stock});
saveAll();
display();
}

function deleteOperator(i){
if(currentRole!=="admin") return;
operators.splice(i,1);
saveAll();
display();
}

function addTransaction(){
let opIndex=document.getElementById("operatorSelect").value;
let currency=document.getElementById("currency").value;
let amount=parseFloat(document.getElementById("amount").value);
let motif=document.getElementById("motif").value;

if(amount<=0)return;

let operator=operators[opIndex];

operator[currency]+=amount;

transactions.push({
date:new Date(),
operator:operator.name,
currency,
amount,
motif
});

saveAll();
display();
}

function display(){
document.getElementById("caisseUSD").innerText=caisse.USD;
document.getElementById("caisseCDF").innerText=caisse.CDF;

let opHTML="";
let opSelect="";
operators.forEach((op,i)=>{
opHTML+=`<div class="card">
${op.name} | USD:${op.USD} | CDF:${op.CDF} | STOCK:${op.stock||0}
${currentRole==="admin" ? `<button onclick="deleteOperator(${i})">X</button>`:""}
</div>`;
opSelect+=`<option value="${i}">${op.name}</option>`;
});
document.getElementById("operatorBalances").innerHTML=opHTML;
document.getElementById("operatorList").innerHTML=opHTML;
document.getElementById("operatorSelect").innerHTML=opSelect;

displayHistory(transactions);
}

function displayHistory(list){
let historyHTML="";
list.slice().reverse().forEach(t=>{
historyHTML+=`<div class="card">
${new Date(t.date).toLocaleString()} |
${t.operator} |
${t.amount} ${t.currency}
<br>Motif: ${t.motif}
</div>`;
});
document.getElementById("history").innerHTML=historyHTML;
}

showApp();

</script>

</body>
</html>￼Enter<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gestion Mobile Money Pro</title>

<style>
body {font-family: Arial; background:#0f172a; margin:0; color:white}
h1 {text-align:center; padding:15px}
.container {background:white; color:black; margin:15px; padding:15px; border-radius:15px}
input, select, button {padding:8px; margin:5px; border-radius:8px; border:1px solid #ccc}
button {cursor:pointer; background:#0f172a; color:white}
.card {background:#f1f5f9; padding:8px; margin:5px; border-radius:8px}
.hidden {display:none}
hr {margin:25px 0}
</style>

</head>
<body>

<h1>Gestion Mobile Money Pro</h1>

<div class="container">

<div id="loginSection">
<h2>Connexion</h2>
<input type="password" id="password" placeholder="Entrer PIN">
<button onclick="login()">Se connecter</button>
</div>

<div id="appSection" class="hidden">

<button onclick="logout()">Déconnexion</button>

<h2>Solde Caisse</h2>
<p>USD: <span id="caisseUSD">0</span></p>
<p>CDF: <span id="caisseCDF">0</span></p>

<h2>Solde Opérateurs</h2>
<div id="operatorBalances"></div>

<hr>

<h2>Nouvelle Transaction</h2>

<select id="operatorSelect"></select>
<select id="typeSelect"></select>
ct id="currency">
<option value="USD">USD</option>
<option value="CDF">CDF</option>
</select>

<input type="number" id="amount" placeholder="Montant">
<input type="text" id="motif" placeholder="Motif">

<button onclick="addTransaction()">Valider</button>

<hr>

<h2>ADMIN - Soldes Initiaux & Création</h2>

<div id="adminSection">

<h3>Caisse</h3>
<input type="number" id="initUSD" placeholder="USD">
<input type="number" id="initCDF" placeholder="CDF">
<button onclick="setInitialCaisse()">Définir</button>

<hr>

<h3>Ajouter Opérateur</h3>
<input type="text" id="newOperator" placeholder="Nom opérateur">
<input type="number" id="opInitUSD" placeholder="USD">
<input type="number" id="opInitCDF" placeholder="CDF">
<input type="number" id="opInitStock" placeholder="Stock">
<button onclick="addOperator()">Ajouter</button>

<div id="operatorList"></div>

</div>

<hr>

<h2>Historique</h2>
<div id="history"></div>

</div>
</div>

<script>

let caisse = JSON.parse(localStorage.getItem("caisse")) || {USD:0,CDF:0};
let operators = JSON.parse(localStorage.getItem("operators")) || [];
let types = JSON.parse(localStorage.getItem("types")) || [];
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

const ADMIN_PIN = "admin123";
const EMP_PIN = "emp123";

let currentRole = localStorage.getItem("role") || "";

function saveAll(){
localStorage.setItem("caisse",JSON.stringify(caisse));
localStorage.setItem("operators",JSON.stringify(operators));
localStorage.setItem("types",JSON.stringify(types));
localStorage.setItem("transactions",JSON.stringify(transactions));
localStorage.setItem("role",currentRole);
}

function login(){
let pass=document.getElementById("password").value;

if(pass===ADMIN_PIN){
currentRole="admin";
showApp();
}
else if(pass===EMP_PIN){
currentRole="employee";
showApp();
}
else{
alert("PIN incorrect");
}
saveAll();
}

function logout(){
localStorage.removeItem("role");
location.reload();
}

function showApp(){
if(currentRole){
document.getElementById("loginSection").classList.add("hidden");
document.getElementById("appSection").classList.remove("hidden");

if(currentRole==="employee"){
document.getElementById("adminSection").style.display="none";
}

display();
