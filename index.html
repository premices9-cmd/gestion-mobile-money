<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gestion Mobile Money Pro</title>
<style>
body{
font-family:Arial;
background:#1f3c88;
color:white;
text-align:center;
margin:0;
padding:0;
}
.container{
background:white;
color:black;
margin:20px;
padding:20px;
border-radius:20px;
}
input,select,button{
width:90%;
padding:10px;
margin:8px;
border-radius:10px;
border:1px solid gray;
}
button{
font-weight:bold;
cursor:pointer;
}
.green{background:green;color:white;}
.red{background:red;color:white;}
.blue{background:#1f3c88;color:white;}
.card{
background:#f2f2f2;
padding:10px;
margin:5px;
border-radius:10px;
}
.admin{
background:#ffeeba;
padding:15px;
border-radius:15px;
margin-top:20px;
}
</style>
</head>
<body>

<h1>Gestion Mobile Money Pro</h1>

<div class="container">

<h3>Tableau de bord</h3>
<p>Total USD: <span id="totalUSD">0</span> $</p>
<p>Total CDF: <span id="totalCDF">0</span> CDF</p>
<p>Total Cr√©dit: <span id="totalCredit">0</span></p>

<hr>

<h3>Nouvelle Transaction</h3>

<select id="operator"></select>
<select id="currency">
<option>USD</option>
<option>CDF</option>
</select>
<select id="type"></select>

<input type="number" id="amount" placeholder="Montant">

<button class="green" onclick="addTransaction()">Valider</button>

<hr>

<h3>Historique</h3>
<div id="history"></div>

<hr>

<div class="admin">
<h3>üîê Administration</h3>

<h4>Ajouter Op√©rateur</h4>
<input type="text" id="newOperator" placeholder="Nom op√©rateur">
<button class="blue" onclick="addOperator()">Ajouter</button>

<h4>Supprimer Op√©rateur</h4>
<select id="deleteOperator"></select>
<button class="red" onclick="removeOperator()">Supprimer</button>

<h4>Ajouter Type</h4>
<input type="text" id="newType" placeholder="Ex: Vente Cash">
<button class="blue" onclick="addType()">Ajouter</button>

<h4>Supprimer Type</h4>
<select id="deleteType"></select>
<button class="red" onclick="removeType()">Supprimer</button>

</div>

</div>

<script>

let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
let operators = JSON.parse(localStorage.getItem("operators")) || ["MTN","Airtel","Orange"];
let types = JSON.parse(localStorage.getItem("types")) || ["deposit","withdraw","credit"];

function saveData(){
localStorage.setItem("operators",JSON.stringify(operators));
localStorage.setItem("types",JSON.stringify(types));
}

function loadSelects(){
let opSelect=document.getElementById("operator");
let delOp=document.getElementById("deleteOperator");
opSelect.innerHTML="";
delOp.innerHTML="";

operators.forEach(op=>{
opSelect.innerHTML+=`<option>${op}</option>`;
delOp.innerHTML+=`<option>${op}</option>`;
});

let typeSelect=document.getElementById("type");
let delType=document.getElementById("deleteType");
typeSelect.innerHTML="";
delType.innerHTML="";

types.forEach(t=>{
typeSelect.innerHTML+=`<option>${t}</option>`;
delType.innerHTML+=`<option>${t}</option>`;
});
}

function addOperator(){
let newOp=document.getElementById("newOperator").value;
if(!newOp) return;
operators.push(newOp);
saveData();
loadSelects();
document.getElementById("newOperator").value="";
}

function removeOperator(){
let op=document.getElementById("deleteOperator").value;
operators=operators.filter(o=>o!==op);
saveData();
loadSelects();
}

function addType(){
let newType=document.getElementById("newType").value;
if(!newType) return;
types.push(newType);
saveData();
loadSelects();
document.getElementById("newType").value="";
}

function removeType(){
let t=document.getElementById("deleteType").value;
types=types.filter(x=>x!==t);
saveData();
loadSelects();
}

function addTransaction(){
let operator=document.getElementById("operator").value;
let currency=document.getElementById("currency").value;
let type=document.getElementById("type").value;
let amount=parseFloat(document.getElementById("amount").value);
if(!amount) return;

transactions.push({
date:new Date().toLocaleString(),
operator,
currency,
type,
amount
});

localStorage.setItem("transactions",JSON.stringify(transactions));
document.getElementById("amount").value="";
display();
}

function display(){
let totalUSD=0;
let totalCDF=0;
let totalCredit=0;
let historyHTML="";

transactions.forEach(t=>{

if(t.type==="deposit"){
if(t.currency==="USD") totalUSD+=t.amount;
else totalCDF+=t.amount;
}
if(t.type==="withdraw"){
if(t.currency==="USD") totalUSD-=t.amount;
else totalCDF-=t.amount;
}
if(t.type==="credit"){
totalCredit+=t.amount;
}

historyHTML+=`
<div class="card">
${t.date}<br>
${t.operator} - ${t.type}<br>
${t.amount} ${t.currency}
</div>
`;
});

document.getElementById("totalUSD").innerText=totalUSD;
document.getElementById("totalCDF").innerText=totalCDF;
document.getElementById("totalCredit").innerText=totalCredit;
document.getElementById("history").innerHTML=historyHTML;
}

loadSelects();
display();

</script>

</body>
</html>
